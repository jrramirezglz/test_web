<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sigfox Data Table</title>
</head>
<body>
  <h1>Datos de Sigfox</h1>
  <table border="1" id="data-table">
    <tr>
      <th>Timestamp</th>
      <th>Data</th>
    </tr>
  </table>

  <script>
    const username = 'mlr@fciencias.uaslp.mx';
    const password = 'Corregidora#35';
    const deviceId = '2A0DC1D';

    fetch(`https://api.sigfox.com/v2/devices/${deviceId}/messages`, {
      headers: {
        'Authorization': 'Basic ' + btoa(username + ':' + password)
      }
    })
    .then(response => {
      if (!response.ok) throw new Error("Error: " + response.status);
      return response.json();
    })
    .then(data => {
      const table = document.getElementById('data-table');
      data.data.forEach(msg => {
        const row = table.insertRow();
        row.insertCell(0).textContent = new Date(msg.time).toLocaleString();
        row.insertCell(1).textContent = msg.data;
      });
    })
    .catch(error => {
      console.error('Error al obtener los datos:', error);
    });
  </script>
</body>
</html>
